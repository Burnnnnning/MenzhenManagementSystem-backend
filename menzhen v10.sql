-- 门诊数据库 --
-- SQL Server数据库 --
USE menzhen;

-- 删除关系表避免外键约束导致错误 --
DROP TABLE IF EXISTS Patient_Treatment_Item;
DROP TABLE IF EXISTS Patient_Drug_Info;
DROP TABLE IF EXISTS Patient_Doctor;

/*
医生表（Doctor）
编号（Doctor_Number）：主键，数据类型为整数。
姓名（Name）：数据类型为字符串。
性别（Gender）：数据类型为字符串
年龄（Age）：数据类型为整数。
科室（Department）：数据类型为字符串。
联系电话（Contact_Phone）：数据类型为字符串。
出诊时间（Outpatient_Time）：数据类型为字符串（或日期时间类型，根据具体需求）。
*/

DROP TABLE IF EXISTS Doctor
CREATE TABLE Doctor (
    Doctor_Number INT PRIMARY KEY,
    Name VARCHAR(255),
    Gender VARCHAR(10),
    Age INT,
    Department VARCHAR(255),
    Contact_Phone VARCHAR(255),
    Outpatient_Time VARCHAR(255),
    Registration_Fee DECIMAL(10, 2) NOT NULL
);

-----------医生表数据-------------
INSERT INTO Doctor (Doctor_Number, Name, Gender, Age, Department, Contact_Phone, Outpatient_Time, Registration_Fee)
VALUES
(101, '张伟', '男', 45, '内科', '13800138001', '08:00 - 12:00', 50.00),
(102, '李娜', '女', 38, '外科', '13800138002', '09:00 - 13:00', 60.00),
(103, '王强', '男', 50, '儿科', '13800138003', '10:00 - 14:00', 40.00),
(104, '赵敏', '女', 42, '妇产科', '13800138004', '08:30 - 12:30', 70.00),
(105, '刘洋', '男', 35, '眼科', '13800138005', '09:30 - 13:30', 55.00),
(106, '陈医生', '男', 40, '皮肤科', '13800138011', '14:00 - 18:00', 65.00),
(107, '刘医生', '女', 37, '耳鼻喉科', '13800138012', '15:00 - 19:00', 55.00),
(108, '王医生', '男', 48, '骨科', '13800138013', '16:00 - 20:00', 75.00),
(109, '赵医生', '女', 43, '心血管科', '13800138014', '17:00 - 21:00', 80.00),
(110, '孙医生', '男', 39, '神经科', '13800138015', '18:00 - 22:00', 70.00),
(111, '吴医生', '男', 47, '肿瘤科', '13800138021', '08:00 - 12:00', 100.00),
(112, '郑医生', '女', 39, '皮肤科', '13800138022', '09:00 - 13:00', 90.00),
(113, '冯医生', '男', 52, '骨科', '13800138033', '10:00 - 14:00', 110.00),
(114, '韩医生', '女', 44, '心血管科', '13800138034', '08:30 - 12:30', 120.00),
(115, '杨医生', '男', 37, '神经科', '13800138035', '09:30 - 13:30', 130.00),
(116, '吴医生', '男', 47, '肿瘤科', '13800138031', '08:00 - 12:00', 100.00),
(117, '郑医生', '女', 39, '皮肤科', '13800138032', '09:00 - 13:00', 90.00),
(118, '冯医生', '男', 52, '骨科', '13800138033', '10:00 - 14:00', 110.00),
(119, '韩医生', '女', 44, '心血管科', '13800138034', '08:30 - 12:30', 120.00),
(120, '杨医生', '男', 37, '神经科', '13800138035', '09:30 - 13:30', 130.00);---------------------------------

/*
患者表（Patient）
编号（Patient_Number）：主键，数据类型为整数。
身份证号（ID_Card_Number）：数据类型为字符串。
姓名（Name）：数据类型为字符串。
年龄（Age）：数据类型为整数。
性别（Gender）：数据类型为字符串（如 '男' 或 '女'）。
症状（Symptom）：数据类型为字符串。
联系方式（Contact_Info）：数据类型为字符串。
医保（Medical_Insurance）：数据类型为字符串。
*/
    
DROP TABLE IF EXISTS Patient
CREATE TABLE Patient (
    Patient_Number INT PRIMARY KEY,
    ID_Card_Number VARCHAR(255) NOT NULL,
    Name VARCHAR(255) NOT NULL,
    Age INT,
    Gender VARCHAR(10),
    Symptom VARCHAR(255),
    Contact_Info VARCHAR(255),
    Medical_Insurance VARCHAR(255)
);

-----------患者表数据-------------
INSERT INTO Patient (Patient_Number, ID_Card_Number, Name, Age, Gender, Symptom, Contact_Info, Medical_Insurance)
VALUES
(1001, '110101199001011234', '张三', 33, '男', '咳嗽、发热', '13800138006', '有'),
(1002, '110101199102022345', '李四', 28, '女', '头痛、头晕', '13800138007', '无'),
(1003, '110101199203033456', '王五', 45, '男', '胃痛、消化不良', '13800138008', '有'),
(1004, '110101199304044567', '赵六', 50, '女', '关节疼痛', '13800138009', '有'),
(1005, '110101199405055678', '孙七', 22, '男', '感冒、流鼻涕', '13800138010', '无'),
(1006, '110101199506066789', '周八', 27, '女', '皮肤瘙痒', '13800138016', '有'),
(1007, '110101199607077890', '吴九', 34, '男', '喉咙痛', '13800138017', '无'),
(1008, '110101199708088901', '郑十', 41, '女', '骨折', '13800138018', '有'),
(1009, '110101199809099012', '王十一', 29, '男', '心悸', '13800138019', '有'),
(1010, '110101199910100123', '李十二', 36, '女', '头痛', '13800138020', '无'),
(1011, '110101200011110123', '赵十三', 55, '女', '糖尿病', '13800138026', '有'),
(1012, '110101200112121234', '钱十四', 48, '男', '高血压', '13800138027', '无'),
(1013, '110101200201132345', '孙十五', 60, '女', '冠心病', '13800138028', '有'),
(1014, '110101200302143456', '李十六', 52, '男', '胃溃疡', '13800138029', '有'),
(1015, '110101200403154567', '周十七', 45, '女', '甲状腺结节', '13800138030', '无'),
(1016, '110101200504150123', '王十八', 30, '男', '胃痛', '13800138036', '有'),
(1017, '110101200605161234', '李十九', 25, '女', '头痛', '13800138037', '无'),
(1018, '110101200706172345', '张二十', 40, '男', '腰痛', '13800138038', '有'),
(1019, '110101200807183456', '赵二十一', 35, '女', '关节痛', '13800138039', '有'),
(1020, '110101200908194567', '孙二十二', 28, '男', '感冒', '13800138040', '无');---------------------------------

/*
诊疗项目表（Treatment_Item）
编号（Item_Number）：主键，数据类型为整数。
项目名称（Item_name）：数据类型为字符串。
价格（Price）：数据类型为浮点数或货币类型（根据数据库类型而定）。
*/

DROP TABLE IF EXISTS Treatment_Item
CREATE TABLE Treatment_Item (
    Item_Number INT PRIMARY KEY,
	Item_Name VARCHAR(255) NOT NULL,
    Price DECIMAL(10, 2) NOT NULL
);

-----------诊疗项目表数据-------------
INSERT INTO Treatment_Item (Item_Number, Item_Name, Price)
VALUES
(201, '血常规检查', 100.00),
(202, '心电图检查', 200.00),
(203, '超声波检查', 300.00),
(204, 'X光检查', 150.00),
(205, 'CT扫描', 500.00),
(206, '核磁共振', 800.00),
(207, '胃镜检查', 400.00),
(208, '肠镜检查', 450.00),
(209, '脑电图检查', 350.00),
(210, '肺功能检查', 250.00),
(211, '肝脏功能检查', 200.00),
(212, '肾脏功能检查', 220.00),
(213, '眼科检查', 180.00),
(214, '口腔检查', 150.00),
(215, '中医理疗', 120.00),
(216, '核磁共振', 800.00),
(217, '胃镜检查', 400.00),
(218, '肠镜检查', 450.00),
(219, '脑电图检查', 350.00),
(220, '肺功能检查', 250.00);
------------------------------------



/*
工作人员登录表
表名：User_Login
属性：
用户编号（User_Number）：主键，外键，关联到用户表的用户编号。
用户名（Username）：字符串类型，唯一索引。
密码（Password）：字符串类型。
*/

DROP TABLE IF EXISTS User_Login;
CREATE TABLE User_Login (
    User_Number INT PRIMARY KEY IDENTITY(1, 1),
    Username VARCHAR(255) NOT NULL UNIQUE,
    Password VARCHAR(255) NOT NULL,
);

--------用户登陆表数据-----------
INSERT INTO User_Login (Username, Password)
VALUES
('admin', 'admin123'),
('doctor1', 'doctor123'),
('nurse1', 'nurse123'),
('reception1', 'reception123'),
('pharmacist1', 'pharmacist123');
--------------------------------

/*
药品信息表
表名：Drug_Info
属性：
药品编号（Drug_Number）：主键。
药品名称（Drug_Name）：字符串类型。
药品价格（Drug_Price）：浮点数类型。
药品生产日期（Drug_Production_Date）：日期类型。
*/
DROP TABLE IF EXISTS Drug_Info;
CREATE TABLE Drug_Info (
    Drug_Number VARCHAR(255) PRIMARY KEY,  -- 药品编号，主键
    Drug_Name VARCHAR(255) NOT NULL,      -- 药品名称，字符串类型
    Drug_Price DECIMAL(10, 2) NOT NULL,   -- 药品价格，浮点数类型
    Drug_Production_Date VARCHAR(255) NOT NULL    -- 药品生产日期，日期类型
);

---- 药品信息表数据 ----------
INSERT INTO Drug_Info (Drug_Number, Drug_Name, Drug_Price, Drug_Production_Date)
VALUES
('D001', '阿莫西林', 25.00, '2023-01-01'),
('D002', '布洛芬', 15.00, '2023-02-01'),
('D003', '头孢', 30.00, '2023-03-01'),
('D004', '维生素C', 10.00, '2023-04-01'),
('D005', '感冒灵', 20.00, '2023-05-01'),
('D006', '阿司匹林', 12.00, '2023-06-01'),
('D007', '维生素D', 18.00, '2023-07-01'),
('D008', '抗生素', 22.00, '2023-08-01'),
('D009', '止痛药', 14.00, '2023-09-01'),
('D010', '抗过敏药', 20.00, '2023-10-01'),
('D011', '降压药', 50.00, '2023-11-01'),
('D012', '降糖药', 60.00, '2023-12-01'),
('D013', '抗生素', 40.00, '2024-01-01'),
('D014', '止咳药', 30.00, '2024-02-01'),
('D015', '抗凝药', 70.00, '2024-03-01'),
('D016', '抗过敏药', 35.00, '2023-11-10'),
('D017', '维生素B', 20.00, '2023-11-15'),
('D018', '抗生素', 45.00, '2023-11-20'),
('D019', '止痛药', 30.00, '2023-11-25'),
('D020', '抗凝药', 55.00, '2023-11-30');
-----------------------------

/*
一个患者可能有多个诊疗项目，一个诊疗项目可能被多个患者使用（多对多的关系）
诊疗表：
表名：Patient_Treatment_Item
属性：
患者编号（Patient_Number）：外键，关联到 Patient 表的 Patient_Number。
诊疗项目编号（Item_Number）：外键，关联到 Treatment_Item 表的 Item_Number。
治疗日期（Treatment_Time）：日期类型
*/

DROP TABLE IF EXISTS Patient_Treatment_Item;
CREATE TABLE Patient_Treatment_Item (
    Patient_Treatment_Item_Number INT PRIMARY KEY IDENTITY(1, 1),
    Patient_Number INT NOT NULL,
    Item_Number INT NOT NULL,
    Treatment_Time VARCHAR(255)
);
----------- 诊疗表数据 -------------
INSERT INTO Patient_Treatment_Item (Patient_Number, Item_Number, Treatment_Time)
VALUES
(1001, 201, '2023-10-01'),
(1001, 202, '2023-10-01'),
(1002, 203, '2023-10-02'),
(1003, 204, '2023-10-03'),
(1004, 205, '2023-10-04'),
(1001, 205, '2023-10-16'),
(1002, 206, '2023-10-17'),
(1003, 207, '2023-10-18'),
(1004, 208, '2023-10-19'),
(1005, 209, '2023-10-20'),
(1006, 210, '2023-10-21'),
(1007, 201, '2023-10-22'),
(1008, 202, '2023-10-23'),
(1009, 203, '2023-10-24'),
(1010, 204, '2023-10-25'),
(1011, 211, '2023-10-26'),
(1012, 212, '2023-10-27'),
(1013, 213, '2023-10-28'),
(1014, 214, '2023-10-29'),
(1015, 215, '2023-10-30'),
(1016, 216, '2023-11-10'),
(1017, 217, '2023-11-11'),
(1018, 218, '2023-11-12'),
(1019, 219, '2023-11-13'),
(1020, 220, '2023-11-14');
----------------------------------------------

/*
处方表：
表名：Patient_Drug_Info
属性：
处方编号（Patient_Drug_Info_Number）：主键，自动递增。
患者编号（Patient_Number）：外键，关联到患者表的患者编号。
药品编号（Drug_Number）：外键，关联到药品信息的药品编号。
使用量（Usage）：整数类型。
开具日期（Issue_Date）：日期类型。
*/

DROP TABLE IF EXISTS Patient_Drug_Info;
CREATE TABLE Patient_Drug_Info (
    Patient_Drug_Info_Number INT IDENTITY(1, 1) PRIMARY KEY,  -- 处方表编号，主键，自动递增
    Patient_Number INT NOT NULL,                              -- 患者编号，外键
    Drug_Number VARCHAR(255) NOT NULL,                        -- 药品编号，外键
    Usage INT NOT NULL,                                       -- 使用量，整数类型
    Issue_Date VARCHAR(255) NOT NULL,                         -- 开具日期，日期类型
);

------- 处方表数据 ----------
INSERT INTO Patient_Drug_Info (Patient_Number, Drug_Number, Usage, Issue_Date)
VALUES
(1001, 'D001', 2, '2023-10-01'),
(1002, 'D002', 1, '2023-10-02'),
(1003, 'D003', 3, '2023-10-03'),
(1004, 'D004', 2, '2023-10-04'),
(1005, 'D005', 1, '2023-10-05'),
(1001, 'D002', 1, '2023-10-06'),
(1002, 'D003', 2, '2023-10-07'),
(1003, 'D004', 3, '2023-10-08'),
(1004, 'D005', 2, '2023-10-09'),
(1005, 'D001', 1, '2023-10-10'),
(1006, 'D006', 1, '2023-10-11'),
(1007, 'D007', 2, '2023-10-12'),
(1008, 'D008', 3, '2023-10-13'),
(1009, 'D009', 1, '2023-10-14'),
(1010, 'D010', 2, '2023-10-15'),
(1011, 'D011', 1, '2023-10-26'),
(1012, 'D012', 2, '2023-10-27'),
(1013, 'D013', 1, '2023-10-28'),
(1014, 'D014', 2, '2023-10-29'),
(1015, 'D015', 1, '2023-10-30'),
(1016, 'D016', 1, '2023-11-10'),
(1017, 'D017', 2, '2023-11-11'),
(1018, 'D018', 1, '2023-11-12'),
(1019, 'D019', 2, '2023-11-13'),
(1020, 'D020', 1, '2023-11-14');
----------------------------


/*
挂号表：
表名：Patient_Doctor
属性：
患者编号（Patient_Number）：外键，关联到 Patient 表的 Patient_Number。
医生编号（Doctor_Number）：外键，关联到 Doctor 表的 Doctor_Number。
看病时间（Medical_Time）：日期类型
*/

DROP TABLE IF EXISTS Patient_Doctor;
CREATE TABLE Patient_Doctor (
    Patient_Doctor_Number INT PRIMARY KEY IDENTITY(1, 1),
    Patient_Number INT NOT NULL,
    Doctor_Number INT NOT NULL,
    Medical_Time VARCHAR(255),
);

----------- 挂号表数据 -------------
INSERT INTO Patient_Doctor (Patient_Number, Doctor_Number, Medical_Time)
VALUES
(1001, 101, '2023-10-01'),
(1002, 102, '2023-10-02'),
(1003, 103, '2023-10-03'),
(1004, 104, '2023-10-04'),
(1005, 105, '2023-10-05'),
(1001, 102, '2023-10-06'),
(1002, 103, '2023-10-07'),
(1003, 104, '2023-10-08'),
(1004, 105, '2023-10-09'),
(1005, 101, '2023-10-10'),
(1006, 106, '2023-10-11'),
(1007, 107, '2023-10-12'),
(1008, 108, '2023-10-13'),
(1009, 109, '2023-10-14'),
(1010, 110, '2023-10-15'),
(1011, 111, '2023-10-26'),
(1012, 112, '2023-10-27'),
(1013, 113, '2023-10-28'),
(1014, 114, '2023-10-29'),
(1015, 115, '2023-10-30'),
(1016, 116, '2023-11-10'),
(1017, 117, '2023-11-11'),
(1018, 118, '2023-11-12'),
(1019, 119, '2023-11-13'),
(1020, 120, '2023-11-14');
------------------------------------------


